{
  "version": 3,
  "sources": ["../src/index.ts", "../src/runCommand.ts", "../src/constants.ts", "../package.json"],
  "sourcesContent": ["import { cli } from './cli';\nimport { promises as fs } from 'fs';\nimport path from 'path';\nimport { runCommand } from './runCommand';\nimport { DOT_BIN, NODE_MODULES } from './constants';\n\nconst commands = ['add', 'i', 'install', 'remove', 'pack', 'publish'];\n\n(async () => {\n  let exitCode;\n  const isOptionSupplied =\n    (process.argv.length > 2 && process.argv[2].startsWith('-')) ||\n    (process.argv.length > 3 && commands.indexOf(process.argv[2]) >= 0 && process.argv[3].startsWith('-'));\n  if (!isOptionSupplied && process.argv.length > 2 && commands.indexOf(process.argv[2]) < 0) {\n    const packageJson = JSON.parse(await fs.readFile('./package.json', 'utf-8'));\n    const scriptNameIndex = process.argv[2] === 'run' ? 3 : 2;\n    const scriptName = process.argv[scriptNameIndex];\n    let script = (packageJson.scripts || {})[scriptName];\n    if (typeof script === 'undefined') {\n      const dotBinPath = path.join(NODE_MODULES, DOT_BIN);\n      const binaries = await fs.readdir(dotBinPath);\n      if (binaries.indexOf(scriptName) >= 0) {\n        script = scriptName;\n      }\n    }\n    exitCode = (await runCommand(process.cwd(), scriptName, script, process.argv.slice(scriptNameIndex + 1), false))\n      .code;\n  } else {\n    exitCode = await cli();\n  }\n  process.exit(exitCode);\n})();\n", "import child from 'child_process';\nimport path from 'path';\n\nimport { DOT_BIN, NODE_MODULES } from './constants';\n\nexport const runCommand = async (\n  cwd: string,\n  scriptName: string,\n  script: any,\n  args: any[],\n  buffer: boolean,\n): Promise<{ output: string; code: number }> => {\n  if (typeof script === 'undefined') {\n    console.error(`Command ${scriptName} not found`);\n    return { output: '', code: 1 };\n  }\n\n  const cmd = [script, ...args].join(' ');\n  const env: any = {\n    NODE: process.execPath,\n    INIT_CWD: process.cwd(),\n    ...process.env,\n  };\n\n  env.npm_lifecycle_event = scriptName;\n  env.npm_node_execpath = env.NODE;\n  env.npm_execpath = env.npm_execpath || (require.main && require.main.filename);\n\n  const pathList: string[] = [];\n\n  const nodeModulesParts = path.resolve(cwd).split(path.sep + NODE_MODULES + path.sep);\n  const currentParts: string[] = [];\n  for (const part of nodeModulesParts) {\n    currentParts.push(part);\n    pathList.unshift(path.join(currentParts.join(path.sep + NODE_MODULES + path.sep), NODE_MODULES, DOT_BIN));\n  }\n\n  pathList.push(path.dirname(process.argv[1]));\n  const envPathList: string[] = env.PATH ? env.PATH.split(path.delimiter) : [];\n  for (const pathElement of envPathList) {\n    pathList.push(pathElement);\n  }\n  env.PATH = pathList.join(path.delimiter);\n\n  const options: any = { env, detached: false, shell: true, cwd };\n  if (!buffer) {\n    options.stdio = 'inherit';\n  }\n\n  let output = ``;\n\n  const task = child.spawn(cmd, [], options);\n\n  if (buffer) {\n    task.stdout.on('data', (chunk) => {\n      output += chunk.toString('utf8');\n    });\n\n    task.stderr.on('data', (chunk) => {\n      output += chunk.toString('utf8');\n    });\n  }\n\n  let promise, resolve;\n\n  promise = new Promise((r) => (resolve = r));\n  task.on('exit', (code) => resolve({ output, code }));\n\n  return await promise;\n};\n", "import path from 'path';\nimport metadata from '../package.json';\n\nexport const VERSION = metadata.version;\nexport const TOOL_NAME = 'nari';\nexport const CACHE_VERSION = `v1`;\nexport const NODE_MODULES = 'node_modules';\nexport const DOT_BIN = '.bin';\nexport const DOWNLOAD_DIR = path.join(NODE_MODULES, `.${TOOL_NAME}`);\nexport const BUILD_SCRIPTS = ['preinstall', 'install', 'postinstall'];\nexport const DEPENDENCY_TYPES = ['dependencies', 'devDependencies', 'peerDependencies', 'optionalDependencies'];\n", "{\n  \"name\": \"nari\",\n  \"version\": \"0.0.7\",\n  \"bin\": \"./lib/nari\",\n  \"scripts\": {\n    \"build\": \"rm -rf ./lib && esbuild src/index.ts --sourcemap --bundle --platform=node --target=node18 --external:./cli --outfile=lib/nari '--banner:js=#!/usr/bin/env node' && chmod +x lib/nari && esbuild src/cli/index.ts --sourcemap --bundle --platform=node --target=node18 --outfile=lib/cli.js\",\n    \"test\": \"jest\",\n    \"nari\": \"nari build && node --enable-source-maps lib/nari\",\n    \"test:watch\": \"jest --watch\",\n    \"lint\": \"eslint --fix\",\n    \"prepack\": \"nari build && nari lint && nari test\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/narijs/nari\"\n  },\n  \"bugs\": {\n    \"url\": \"https://github.com/narijs/nari/issues\"\n  },\n  \"keywords\": [\n    \"modules\",\n    \"install\",\n    \"package manager\"\n  ],\n  \"author\": \"SysGears (Cyprus) Limited\",\n  \"license\": \"MIT\",\n  \"devDependencies\": {\n    \"@types/jest\": \"^29.5.13\",\n    \"@types/node\": \"^22.7.4\",\n    \"@typescript-eslint/eslint-plugin\": \"^8.7.0\",\n    \"@typescript-eslint/parser\": \"^8.7.0\",\n    \"commander\": \"^12.1.0\",\n    \"detect-indent\": \"^6.0.0\",\n    \"micromatch\": \"^4.0.8\",\n    \"semver\": \"^7.6.3\",\n    \"tar-stream\": \"^3.1.7\",\n    \"esbuild\": \"^0.24.0\",\n    \"esbuild-jest\": \"^0.5.0\",\n    \"eslint\": \"^9.11.1\",\n    \"eslint-config-prettier\": \"^9.1.0\",\n    \"eslint-plugin-header\": \"^3.1.1\",\n    \"eslint-plugin-jest\": \"^28.8.3\",\n    \"eslint-plugin-prettier\": \"^5.2.1\",\n    \"husky\": \"^9.1.6\",\n    \"jest\": \"^29.7.0\",\n    \"lint-staged\": \"^15.2.10\",\n    \"prettier\": \"^3.3.3\",\n    \"typescript\": \"~5.5.0\"\n  },\n  \"lint-staged\": {\n    \"*.ts\": [\n      \"eslint --fix -c tslint.json\",\n      \"git add\"\n    ]\n  },\n  \"prettier\": {\n    \"printWidth\": 120,\n    \"singleQuote\": true,\n    \"parser\": \"typescript\"\n  },\n  \"husky\": {\n    \"pre-commit\": \"lint-staged\"\n  },\n  \"lockTime\": \"2024-10-02T12:40:33.928Z\"\n}"],
  "mappings": "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",
  "names": ["import_path", "import_path", "path", "path", "child", "fs", "path"]
}
